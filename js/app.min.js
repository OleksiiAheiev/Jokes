(()=>{"use strict";const e=e=>fetch(e).then((e=>e.json()));function t(e,t){const a=document.createElement("div"),r="img/svg/heart.svg",s="img/svg/like.svg",i=document.createElement("span"),d=document.createElement("img"),l=document.createElement("span"),m=document.createElement("img"),u=document.createElement("a"),g=document.createElement("span"),p=document.createElement("img"),f=document.createElement("p"),h=document.createElement("div"),L=document.createElement("p"),v=document.createElement("p");a.classList.add("joke-card"),i.classList.add("joke-card__message"),l.classList.add("joke-card__like"),g.classList.add("joke-card__id"),f.classList.add("joke-card__text"),h.classList.add("joke-card__type-info"),L.classList.add("joke-card__type-info--info"),m.addEventListener("click",(()=>{!function(e){o(e.id)?function(e){const t=n().filter((t=>t.id!==e.id));localStorage.setItem("favoriteList",JSON.stringify(t)),c()}(e):function(e){const t=n();t.push(e),localStorage.setItem("favoriteList",JSON.stringify(t)),c()}(e)}(t),o(t.id)?m.src=s:m.src=r})),o(t.id)?m.src=s:m.src=r,d.setAttribute("src","img/svg/message.svg"),u.setAttribute("href",`${t.url}`),p.setAttribute("src","img/svg/link.svg"),g.innerHTML="ID:",u.innerText=t.id,i.append(d),l.append(m),g.append(u),g.append(p),f.innerText=t.value,L.innerHTML=`Last update: ${function(e){const t=new Date(e),n=((new Date).getTime()-t.getTime())/36e5;return Math.floor(n)}(t.updated_at)} haurs ago`,h.append(L,v),a.append(i,l,g,f,h),t.categories.length>0&&(v.innerText=t.categories,v.classList.add("joke-card__type-info--joke-type"),v.style.display="inline-block"),e.append(a)}function n(){return localStorage.getItem("favoriteList")?JSON.parse(localStorage.getItem("favoriteList")):[]}function o(e){return n().find((t=>t.id===e))}function c(){document.querySelectorAll(".hero__right-jokes, .header__right-menu").forEach((e=>{e.innerHTML="",n().forEach((n=>t(e,n)))}))}const a="https://api.chucknorris.io/jokes",r=document.querySelector("#form-categories"),s=document.querySelector(".hero__form"),i=document.querySelector("#form-category"),d=document.querySelector("#form-search-btn"),l=document.querySelector("#form-search"),m=document.querySelector(".hero__jokes"),u=document.querySelector(".burger"),g=document.querySelector(".header__right-menu"),p=document.querySelector(".overlay");!function(e){let t=new Image;t.onload=t.onerror=()=>{!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),u.addEventListener("click",(()=>{u.classList.toggle("active"),g.classList.toggle("menu-opened"),p.classList.toggle("open")})),p.addEventListener("click",(()=>{u.classList.remove("active"),g.classList.remove("menu-opened"),p.classList.remove("open")})),e(`${a}/categories`).then((e=>{const t=document.createElement("ul");t.classList.add("hero__category-list"),e.forEach((e=>{const n=document.createElement("li"),o=document.createElement("label"),c=document.createElement("input");n.classList.add("hero__categoty-el"),c.type="radio",c.name="jokeCategory",c.value=e,c.setAttribute("id",e),o.setAttribute("for",e),o.innerText=e.toUpperCase(),o.prepend(c),n.append(c),n.append(o),t.append(n)})),r.append(t)})),s.addEventListener("submit",(n=>{n.preventDefault();const o=document.querySelector("input[name=jokeType]:checked").value;if("random"===o&&e(`${a}/random`).then((e=>t(m,e))),"category"===o){const n=document.querySelector("input[name=jokeCategory]:checked").value;e(`${a}/random?category=${n}`).then((e=>t(m,e)))}"search"===o&&e(`${a}/search?query=${l.value}`).then((e=>{e.result.forEach((e=>t(m,e)))}))})),i.addEventListener("change",(()=>{l.classList.add("d-none"),r.classList.remove("d-none")})),d.addEventListener("change",(()=>{r.classList.add("d-none"),l.classList.remove("d-none")})),c()})();